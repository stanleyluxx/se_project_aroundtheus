!function(){"use strict";class t{constructor(t,e,s){this._name=t.name,this._link=t.link,this._cardSelector=e,this._handleImageClick=s,this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button")}_setEventListeners(){this._likeButton.addEventListener("click",t=>{t.stopPropagation(),this._handleLikeIcon()}),this._deleteButton.addEventListener("click",t=>{t.stopPropagation(),this._handleDeleteCard()}),this._cardElement.addEventListener("click",()=>{this._handleImageClick(this._name,this._link)})}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_active")}getView(){return this._cardTitleEl.textContent=this._name,this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._setEventListeners(),this._cardElement}}class e{constructor({inputSelector:t,submitButtonSelector:e,inactiveButtonClass:s,inputErrorClass:n,errorClass:i},o){this._inputSelector=t,this._submitButtonSelector=e,this._inactiveButtonClass=s,this._inputErrorClass=n,this._errorClass=i,this._form=o,this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(e)}_showInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),e&&(e.textContent=t.validationMessage,e.classList.add(this._errorClass))}_hideInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e&&(e.textContent="",e.classList.remove(this._errorClass))}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return this._inputElements.some(t=>!t.validity.valid)}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_setEventListeners(){this._inputElements.forEach(t=>{t.addEventListener("input",()=>{this._checkInputValidity(t),this._toggleButtonState()})}),this._form.addEventListener("submit",t=>{t.preventDefault()}),this._toggleButtonState()}enableValidation(){this._setEventListeners()}resetValidation(){this._inputElements.forEach(t=>{this._hideInputError(t)}),this._toggleButtonState()}}class s{constructor(t){this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._popup.querySelector(".modal__close-button").addEventListener("click",()=>this.close()),this._popup.addEventListener("mousedown",t=>{t.target===this._popup&&this.close()})}}var n=class extends s{constructor(t,e){super(t),this._handleFormSubmit=e,this._form=this._popup.querySelector(".modal__form"),this._inputList=this._form.querySelectorAll(".modal__input")}_getInputValues(){const t={};return this._inputList.forEach(e=>{t[e.name]=e.value}),t}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()})}close(){super.close(),this._form.reset()}};const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},o=document.querySelector("#open-edit-btn"),r=document.querySelector("#open-add-btn"),a=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector(".modal__input-type-title")),l=document.querySelector(".modal__input-type-description"),c=document.querySelector("#modal-edit-form"),u=document.querySelector("#modal-create-form"),_=new class{constructor({nameSelector:t,jobSelector:e}){this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(e)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo({name:t,job:e}){t&&(this._nameElement.textContent=t),e&&(this._jobElement.textContent=e)}}({nameSelector:".profile__title",jobSelector:".profile__description"}),d=new class{constructor({items:t,renderer:e},s){this._items=t,this._renderer=e,this._container=document.querySelector(s)}renderItems(){this._items.forEach(t=>{const e=this._renderer(t);this.addItem(e)})}addItem(t){this._container.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:t=>m(t)},".cards__list");function m(e){return new t(e,"#card-template",v).getView()}d.renderItems();const h=new class extends s{constructor(t){super(t),this._imageElement=this._popup.querySelector(".modal__image"),this._captionElement=this._popup.querySelector(".modal__image-caption")}open({name:t,link:e}){this._imageElement.src=e,this._imageElement.alt=t,this._captionElement.textContent=t,super.open()}}("#image-popup");h.setEventListeners();const p=new n("#modal-edit",t=>{_.setUserInfo({name:t.title,job:t.description})});p.setEventListeners();const E=new e(i,c);function v(t,e){h.open({name:t,link:e})}E.enableValidation(),new e(i,u).enableValidation();const S=new n("#modal-add",t=>{const e=m({name:t.title,link:t.link});d.addItem(e)});S.setEventListeners(),r.addEventListener("click",()=>{S.open()}),o.addEventListener("click",()=>{const t=_.getUserInfo();a.value=t.name,l.value=t.job,E.resetValidation(),p.open()})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9JbnNlcnQgcHJvamVjdCBuYW1lLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9JbnNlcnQgcHJvamVjdCBuYW1lLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9JbnNlcnQgcHJvamVjdCBuYW1lLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vSW5zZXJ0IHByb2plY3QgbmFtZS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL0luc2VydCBwcm9qZWN0IG5hbWUvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL0luc2VydCBwcm9qZWN0IG5hbWUvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vSW5zZXJ0IHByb2plY3QgbmFtZS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9JbnNlcnQgcHJvamVjdCBuYW1lLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vSW5zZXJ0IHByb2plY3QgbmFtZS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fY2FyZEltYWdlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXG4gICAgKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyAuY2FyZC1saWtlLWJ1dHRvblxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbigpO1xuICAgIH0pO1xuXG4gICAgLy8gLmNhcmQtZGVsZXRlLWJ1dHRvblxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKTtcbiAgICB9KTtcblxuICAgIC8vIGhhbmRsZUltYWdlQ2xpY2tcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSWNvbigpIHsgXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkVGl0bGVFbC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlRWwuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hbHQgPSB0aGlzLl9uYW1lO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHtcbiAgICAgIGlucHV0U2VsZWN0b3IsXG4gICAgICBzdWJtaXRCdXR0b25TZWxlY3RvcixcbiAgICAgIGluYWN0aXZlQnV0dG9uQ2xhc3MsXG4gICAgICBpbnB1dEVycm9yQ2xhc3MsXG4gICAgICBlcnJvckNsYXNzLFxuICAgIH0sXG4gICAgZm9ybUVsZW1lbnRcbiAgKSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBpbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcblxuICAgIGlmIChlcnJvck1lc3NhZ2VFbGVtZW50KSB7XG4gICAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuXG4gICAgaWYgKGVycm9yTWVzc2FnZUVsZW1lbnQpIHtcbiAgICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2Rpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsZW1lbnRzLnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIENsb3NlIGJ1dHRvblxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICAgIC8vIE92ZXJsYXkgY2xpY2tcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbnN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcHRpb25FbGVtZW50ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiKTtcbiAgfVxuICBvcGVuKHtuYW1lLCBsaW5rfSkge1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX2NhcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcblxuICAgIHN1cGVyLm9wZW4oKTtcblxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlOyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgfVxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBmb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiZXhwb3J0IGNvbnN0IGNhcmREYXRhID0gW1xuICB7IG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIiB9LFxuICB7IG5hbWU6IFwiTGFrZSBMb3Vpc2VcIiwgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiIH0sXG4gIHsgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLCBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIgfSxcbiAgeyBuYW1lOiBcIkxhdGVtYXJcIiwgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIgfSxcbiAgeyBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLCBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIiB9LFxuICB7IG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIiwgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIgfSxcbl07XG5cbi8vIEZvcm0gVmFsaWRhdG9yIHNldHRpbmdzXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuLy8gRE9NIEVsZW1lbnRzXG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3Blbi1lZGl0LWJ0blwiKTtcbmV4cG9ydCBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI29wZW4tYWRkLWJ0blwiKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0LXR5cGUtdGl0bGVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dC10eXBlLWRlc2NyaXB0aW9uXCIpO1xuXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZWRpdC1mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtY3JlYXRlLWZvcm1cIik7XG5cbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGVTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjsiLCIvL0ltcG9ydHNcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHtcbiAgY2FyZERhdGEsXG4gIHNldHRpbmdzLFxuICBlZGl0QnV0dG9uLFxuICBhZGRCdXR0b24sXG4gIHByb2ZpbGVUaXRsZSxcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxuICBwcm9maWxlVGl0bGVJbnB1dCxcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXG4gIGVkaXRQcm9maWxlRm9ybUVsZW1lbnQsXG4gIGFkZENhcmRGb3JtRWxlbWVudCxcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG59IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xuXG4vL1VzZXJJbmZvIEluc3RhbmNlXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG59KTtcblxuLy9TZWN0aW9uIENsYXNzIEluc3RhbmNlXG5cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogY2FyZERhdGEsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSk7XG4gICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gICAgfSxcbiAgfSxcbiAgXCIuY2FyZHNfX2xpc3RcIlxuKTtcblxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBjYXJkVGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljayk7XG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcbn1cblxuLy9wb3B1cFdpdGhJbWFnZSBpbnN0YW5jZVxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNpbWFnZS1wb3B1cFwiKTtcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gRWRpdCBQcm9maWxlIFBvcHVwXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjbW9kYWwtZWRpdFwiLCAoZm9ybURhdGEpID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgIG5hbWU6IGZvcm1EYXRhW1widGl0bGVcIl0sXG4gICAgam9iOiBmb3JtRGF0YVtcImRlc2NyaXB0aW9uXCJdLFxuICB9KTtcbn0pO1xuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL0Zvcm1WYWxpZGF0b3IgQ2xhc3MgSW5zdGFuY2VcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGVkaXRQcm9maWxlRm9ybUVsZW1lbnQpO1xuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhZGRDYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGFkZENhcmRGb3JtRWxlbWVudCk7XG5hZGRDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhuYW1lLCBsaW5rKSB7XG4gIGltYWdlUG9wdXAub3Blbih7IG5hbWUsIGxpbmsgfSk7XG59XG5cbi8vIEFkZCBDYXJkIFBvcHVwXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNtb2RhbC1hZGRcIiwgKGZvcm1EYXRhKSA9PiB7XG4gIGNvbnN0IG5ld0NhcmREYXRhID0ge1xuICAgIG5hbWU6IGZvcm1EYXRhW1widGl0bGVcIl0sXG4gICAgbGluazogZm9ybURhdGFbXCJsaW5rXCJdLFxuICB9O1xuICBjb25zdCBuZXdDYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQobmV3Q2FyZERhdGEpO1xuICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmRFbGVtZW50KTtcbn0pO1xuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRDYXJkUG9wdXAub3BlbigpO1xufSk7XG5cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgY3VycmVudFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8ubmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8uam9iO1xuXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuXG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xufSk7XG4iLCJleHBvcnQgZGVmYXVsdCAgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7bmFtZVNlbGVjdG9yLCBqb2JTZWxlY3Rvcn0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbnJldHVybiB7XG4gIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXG59O1xuICB9XG5cbiAgc2V0VXNlckluZm8oe25hbWUsIGpvYn0pIHtcbmlmIChuYW1lKSB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG5pZiAoam9iKSB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICAgIHRoaXMuYWRkSXRlbShlbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NhcmRFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkSW1hZ2VFbCIsIl9jYXJkVGl0bGVFbCIsIl9saWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwicmVtb3ZlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZ2V0VmlldyIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiRm9ybVZhbGlkYXRvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm0iLCJfaW5wdXRFbGVtZW50cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9kaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZW5hYmxlVmFsaWRhdGlvbiIsInJlc2V0VmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0Iiwic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImVkaXRQcm9maWxlRm9ybUVsZW1lbnQiLCJhZGRDYXJkRm9ybUVsZW1lbnQiLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwiY2FyZFNlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiY3JlYXRlQ2FyZCIsImltYWdlUG9wdXAiLCJfaW1hZ2VFbGVtZW50IiwiX2NhcHRpb25FbGVtZW50IiwiZWRpdFByb2ZpbGVQb3B1cCIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtRGF0YSIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZFBvcHVwIiwibmV3Q2FyZEVsZW1lbnQiLCJjdXJyZW50VXNlckluZm8iXSwic291cmNlUm9vdCI6IiJ9